import{_ as B,u as T,g as V,m as F,K as I,h as E,E as u,i as N,b as m,n as c,d as w,e as l,w as n,F as S,r as d,o as z,f as v}from"./index-CvmFJ_Ff.js";import{a as y}from"./index-DUccw6c8.js";const A="_addDrugBtn_px8e8_1",j="_drugManage_px8e8_20",K="_drugTitle_px8e8_29",P="_drugList_px8e8_36",R="_leftIcon_px8e8_39",q={addDrugBtn:A,drugManage:j,drugTitle:K,drugList:P,leftIcon:R},G={__name:"index",setup(J){const C=T(),g=V(!1),r=F({drug_name:"",usage:"",cure:"",single_price:0}),D=V([]),p=V(""),L=I(()=>D.value.filter(a=>!p.value||a.drug_name.toLowerCase().includes(p.value.toLowerCase())));E(async()=>{await f()});const $=async()=>{let{drug_name:a,usage:e,cure:o,single_price:s}=r;try{let{status:i,message:b}=await y.addDrug(a,e,o,s);i===0?(u.success("Successful addition of drugs!"),g.value=!1,await f()):u.error("Failure to add drugs",b)}catch(i){u.error(i)}},x=async(a,e)=>{try{let{status:o,message:s}=await y.deleteDrug(e.drug_name);if(o===0){u.success("Deleted successfully!"),await f();return}u.error(s)}catch(o){u.error(o)}},f=async()=>{try{const{data:a,status:e,message:o}=await y.getDrugList();if(e===0){D.value=a;return}u.error(o)}catch(a){u.error(a)}};return(a,e)=>{const o=d("el-table-column"),s=d("el-input"),i=d("el-button"),b=d("el-table"),_=d("el-form-item"),U=d("el-input-number"),k=d("el-form"),M=d("el-dialog");return z(),N(S,null,[m("div",{class:c(a.$style.drugManage)},[m("div",{class:c(a.$style.drugList)},[m("i",{class:c(["iconfont icon-zuojiantou_huaban",a.$style.leftIcon]),onClick:e[0]||(e[0]=t=>w(C).back(-1))},null,2),m("span",{class:c(a.$style.drugTitle)}," Drug List ",2),l(b,{data:w(L),border:"","max-height":"600"},{default:n(()=>[l(o,{prop:"drug_name",label:"Drug name",align:"center"}),l(o,{prop:"usage",label:"Usage"}),l(o,{prop:"cure",label:"Treatments"}),l(o,{prop:"single_price",label:"Unit Price",width:"100",align:"center"}),l(o,{align:"center"},{header:n(()=>[l(s,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),placeholder:"Search for drug name"},null,8,["modelValue"])]),default:n(t=>[l(i,{type:"danger",onClick:O=>x(t.$index,t.row)},{default:n(()=>[v(" Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],2)],2),m("div",{class:c(a.$style.addDrugBtn),onClick:e[2]||(e[2]=t=>g.value=!0)}," Add drugs ",2),l(M,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=t=>g.value=t),title:"Add drugs",style:{padding:"3rem"}},{footer:n(()=>[m("span",null,[l(i,{onClick:e[7]||(e[7]=t=>g.value=!1)},{default:n(()=>[v("Cancel")]),_:1}),l(i,{type:"primary",onClick:$},{default:n(()=>[v(" Submit ")]),_:1})])]),default:n(()=>[l(k,{model:r},{default:n(()=>[l(_,{label:"Drug name"},{default:n(()=>[l(s,{modelValue:r.drug_name,"onUpdate:modelValue":e[3]||(e[3]=t=>r.drug_name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(_,{label:"Usage"},{default:n(()=>[l(s,{modelValue:r.usage,"onUpdate:modelValue":e[4]||(e[4]=t=>r.usage=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(_,{label:"Treatments"},{default:n(()=>[l(s,{modelValue:r.cure,"onUpdate:modelValue":e[5]||(e[5]=t=>r.cure=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(_,{label:"Unit price"},{default:n(()=>[l(U,{modelValue:r.single_price,"onUpdate:modelValue":e[6]||(e[6]=t=>r.single_price=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}},H={$style:q},X=B(G,[["__cssModules",H]]);export{X as default};
