import{a as S}from"./index-DUccw6c8.js";import{_ as V,g as o,a as B,u as E,h as L,E as f,i as p,b as R,e as s,w as l,n as _,r as c,o as u,f as g,j as C,c as I}from"./index-CvmFJ_Ff.js";const U="_content_id8dn_1",j="_tableCard_id8dn_7",q="_pagination_id8dn_16",T={content:U,tableCard:j,pagination:q},W={key:0},Y={key:1},A={__name:"index",setup(F){const r=o(1),i=o(20),m=o(0),h=B(),z=E(),v=o(h.user.role),y=o(),b=o();L(async()=>{await w()});const w=async()=>{try{const{status:e,message:a,data:t}=await S.getMyPsList();if(e!==0){f.error(a);return}y.value=t,m.value=t.length,d()}catch(e){f.error(e)}},k=e=>{i.value=e,d()},P=async e=>{r.value=e,d()},d=async()=>{b.value=y.value.filter((e,a)=>a<r.value*i.value&&a>=i.value*(r.value-1))},M=async(e,a)=>{const{ps_id:t}=a;z.push({name:"ViewPs",query:{ps_id:t}})};return(e,a)=>{const t=c("el-table-column"),N=c("el-button"),$=c("el-table"),x=c("el-pagination");return u(),p("div",{class:_(e.$style.content)},[R("div",{class:_(e.$style.tableCard)},[s($,{data:b.value,size:"small"},{default:l(()=>[s(t,{align:"center",prop:"ps_id",label:"prescription id"}),s(t,{align:"center",prop:"doc_id",label:"doctor id"}),s(t,{align:"center",prop:"patient_id",label:"patient id"}),s(t,{align:"center",prop:"create_time",label:"Creation time"}),s(t,{align:"center"},{header:l(()=>[g(" Whether paid ")]),default:l(n=>[n.row.paid===0?(u(),p("span",W,"No")):n.row.paid===1?(u(),p("span",Y,"Yes")):C("",!0)]),_:1}),v.value===1||v.value===2?(u(),I(t,{key:0,align:"center"},{header:l(()=>[g(" view ")]),default:l(n=>[s(N,{size:"small",type:"primary",plain:"",onClick:G=>M(n.$index,n.row)},{default:l(()=>[g("details")]),_:2},1032,["onClick"])]),_:1})):C("",!0)]),_:1},8,["data"]),s(x,{currentPage:r.value,"onUpdate:currentPage":a[0]||(a[0]=n=>r.value=n),"page-size":i.value,"onUpdate:pageSize":a[1]||(a[1]=n=>i.value=n),"page-sizes":[10,20,50,100],background:"",class:_(e.$style.pagination),layout:"sizes, prev, pager, next",total:m.value,onSizeChange:k,onCurrentChange:P},null,8,["currentPage","page-size","class","total"])],2)],2)}}},D={$style:T},K=V(A,[["__cssModules",D]]);export{K as default};
