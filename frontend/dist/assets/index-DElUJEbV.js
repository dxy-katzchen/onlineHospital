import{a as x}from"./index-DUccw6c8.js";import{_ as N,g as s,a as S,u as B,h as P,E as v,i as E,b as L,e as n,w as i,n as u,r as c,o as y,c as R,f as b,j as H}from"./index-CvmFJ_Ff.js";const I="_content_id8dn_1",U="_tableCard_id8dn_7",j="_pagination_id8dn_16",q={content:I,tableCard:U,pagination:j},A={__name:"index",setup(T){const l=s(1),r=s(20),p=s(0),C=S(),f=B(),_=s(C.user.role),g=s(),m=s();P(async()=>{await h()});const h=async()=>{try{const{status:e,message:a,data:t}=await x.getMyMedicalList();if(e!==0){v.error(a);return}g.value=t,p.value=t.length,d()}catch(e){v.error(e)}},z=e=>{r.value=e,d()},M=async e=>{l.value=e,d()},d=async()=>{m.value=g.value.filter((e,a)=>a<l.value*r.value&&a>=r.value*(l.value-1))},w=async(e,a)=>{const{med_hist_id:t}=a;f.push({name:"ViewMedicalHistory",query:{med_hist_id:t}})};return(e,a)=>{const t=c("el-table-column"),k=c("el-button"),V=c("el-table"),$=c("el-pagination");return y(),E("div",{class:u(e.$style.content)},[L("div",{class:u(e.$style.tableCard)},[n(V,{data:m.value,size:"small"},{default:i(()=>[n(t,{align:"center",prop:"med_hist_id",label:"Medical record id"}),n(t,{align:"center",prop:"appt_id",label:"Appointment id"}),n(t,{align:"center",prop:"doc_id",label:"doctor id"}),n(t,{align:"center",prop:"patient_id",label:"patientid"}),n(t,{align:"center",prop:"time",label:"Creation time"}),_.value===1||_.value===2?(y(),R(t,{key:0,align:"center"},{header:i(()=>[b(" View ")]),default:i(o=>[n(k,{size:"small",type:"primary",plain:"",onClick:F=>w(o.$index,o.row)},{default:i(()=>[b("Details")]),_:2},1032,["onClick"])]),_:1})):H("",!0)]),_:1},8,["data"]),n($,{currentPage:l.value,"onUpdate:currentPage":a[0]||(a[0]=o=>l.value=o),"page-size":r.value,"onUpdate:pageSize":a[1]||(a[1]=o=>r.value=o),"page-sizes":[10,20,50,100],background:"",class:u(e.$style.pagination),layout:"sizes, prev, pager, next",total:p.value,onSizeChange:z,onCurrentChange:M},null,8,["currentPage","page-size","class","total"])],2)],2)}}},D={$style:q},K=N(A,[["__cssModules",D]]);export{K as default};
