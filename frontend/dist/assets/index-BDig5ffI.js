import{a as u}from"./index-DUccw6c8.js";import{_ as N,g as m,m as U,h as B,E as i,i as S,e,w as l,n as x,r,o as F,b,f as y}from"./index-CvmFJ_Ff.js";const T="_avatar_hm5w8_1",j="_pagination_hm5w8_8",O={avatar:T,pagination:j},W={style:{display:"flex","align-items":"center"}},q=["src"],G={class:"dialog-footer"},H={__name:"index",setup(J){const v=m(),w=m(0),_=m(1),p=m(!1),h="140px",c=U({doc_id:null,desc:"",consult_type:0});B(async()=>{await C()});const D=async()=>{await C()},L=async()=>{const{doc_id:o,desc:a,consult_type:t}=c;try{const{status:n,message:d,appt_number:g}=await u.addAppointment(o,a,t);if(n!==0){i.error(d);return}i.success(d),t===1&&await P(g)}catch(n){i.error(n)}p.value=!1},P=async o=>{const{status:a,message:t}=await u.addConsultation(o);if(a!==0){i.error(t);return}i.success(t)},M=(o,a)=>{c.doc_id=a.doc_id,p.value=!0},A=async o=>{try{let{result:a,status:t,message:n}=await u.getDoctorList(o.dept_id);if(t!==0){i.error(n);return}o.doctorList=a}catch(a){i.error(a)}},C=async()=>{try{let{status:o,message:a,result:t,total:n}=await u.getDeptList(_.value);if(o!==0){i.error(a);return}w.value=n,v.value=t.map(d=>(d.doctorList=[],d))}catch(o){i.error(o)}};return(o,a)=>{const t=r("el-table-column"),n=r("el-button"),d=r("el-table"),g=r("el-pagination"),E=r("el-input"),V=r("el-form-item"),k=r("el-option"),R=r("el-select"),$=r("el-form"),z=r("el-dialog");return F(),S("div",null,[e(d,{stripe:"",border:"",data:v.value,onExpandChange:A,"row-key":"dept_id",style:{width:"100%"}},{default:l(()=>[e(t,{type:"expand"},{default:l(s=>[e(d,{size:"small",data:s.row.doctorList},{default:l(()=>[e(t,{label:"Avatar",width:"160",align:"center"},{default:l(f=>[b("div",W,[b("img",{class:x(o.$style.avatar),src:f.row.avatar,alt:"",srcset:""},null,10,q)])]),_:1}),e(t,{label:"doctor id",prop:"doc_id",width:"80",align:"center"}),e(t,{label:"doctor name",prop:"doc_name",width:"100",align:"center"}),e(t,{label:"Title",prop:"title_name",width:"100",align:"center"}),e(t,{label:"Specialization","show-overflow-tooltip":"",align:"center",prop:"description"}),e(t,{label:"Phone",prop:"phone",align:"center",width:"100"}),e(t,{label:"Email",prop:"email",width:"200",align:"center"}),e(t,{label:"Remaining Reservations",prop:"doc_spare",align:"center",width:"80"}),e(t,{label:"Opeartion",width:"150",align:"center"},{default:l(f=>[e(n,{size:"small",type:"primary",onClick:K=>M(o._,f.row)},{default:l(()=>[y(" Make Appointment ")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:1}),e(t,{prop:"dept_id",align:"center",label:"Department id",width:"100"}),e(t,{prop:"dept_name",align:"center",label:"Department name"}),e(t,{prop:"dept_desc",label:"Department description"}),e(t,{prop:"dept_spare",align:"center",label:"Remaining Reservations",width:"140"}),e(t,{prop:"doc_number",align:"center",label:"doctor number",width:"140"})]),_:1},8,["data"]),e(g,{currentPage:_.value,"onUpdate:currentPage":a[0]||(a[0]=s=>_.value=s),background:"",class:x(o.$style.pagination),layout:"prev, pager, next,jumper",total:w.value,onCurrentChange:D},null,8,["currentPage","class","total"]),e(z,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=s=>p.value=s),title:"Make an appoinement"},{footer:l(()=>[b("span",G,[e(n,{onClick:a[3]||(a[3]=s=>p.value=!1)},{default:l(()=>[y("Cancel")]),_:1}),e(n,{type:"primary",onClick:L},{default:l(()=>[y(" Submit ")]),_:1})])]),default:l(()=>[e($,{model:c},{default:l(()=>[e(V,{label:"Symptom","label-width":h},{default:l(()=>[e(E,{modelValue:c.desc,"onUpdate:modelValue":a[1]||(a[1]=s=>c.desc=s),autocomplete:"off",placeholder:"Please briefly describe your symptoms"},null,8,["modelValue"])]),_:1}),e(V,{label:"Consultation type","label-width":h},{default:l(()=>[e(R,{modelValue:c.consult_type,"onUpdate:modelValue":a[2]||(a[2]=s=>c.consult_type=s),placeholder:"Please select the type of consultation"},{default:l(()=>[e(k,{label:"Chat Consultation",value:0}),e(k,{label:"Video Consultation",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},I={$style:O},Y=N(H,[["__cssModules",I]]);export{Y as default};
