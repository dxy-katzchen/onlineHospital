import{a as Z}from"./index-DUccw6c8.js";import{_ as ee,g as b,a as te,l as ae,u as le,m as U,h as ne,q as B,E as N,i as oe,b as M,e,w as t,n as z,F as se,r as p,o as y,f as s,t as d,s as ie,c as C,j as v}from"./index-CvmFJ_Ff.js";const ue="_content_s8kg7_1",de="_query_s8kg7_9",re="_tableCard_s8kg7_34",pe="_typeTag_s8kg7_46",ce="_pagination_s8kg7_56",_e={content:ue,query:de,tableCard:re,typeTag:pe,pagination:ce},me={__name:"index",setup(ye){const V=b(1),k=b(10),P=b(0),x=te(),j=ae(),w=le(),A=b(!1),r=U({doc_name:"",patient_name:"",dept_name:"",status:"",consult_type:null}),a=U({appt_id:null,doc_name:"",doc_id:null,patient_name:"",patient_id:null,time:""}),h=b(x.user.role),q=b(),$=b();ne(async()=>{await _()}),B(A,async l=>{l||await _()});const H=async()=>{const{appt_id:l}=a;w.push({name:"AddMedicalHistory",query:{appt_id:l}})},O=async()=>{const{appt_id:l}=a;w.push({name:"CreatePs",query:{appt_id:l}})},R=async()=>{const{appt_id:l}=a;w.push({name:"ViewPs",query:{appt_id:l}})},E=async()=>{const{appt_id:l,consult_type:o}=a;j.appt_id=l,o===0?w.push({name:"TextConsultation"}):w.push({name:"VideoChat"})},I=async()=>{const{med_hist_id:l}=a;w.push({name:"ViewMedicalHistory",query:{med_hist_id:l}})},L=async(l,o)=>{A.value=!0,Object.assign(a,o),console.log(a)},Y=()=>{Object.assign(r,{doc_name:"",patient_name:"",dept_name:"",status:"",consult_type:null})},_=async()=>{try{let{doc_name:l,patient_name:o,dept_name:D,consult_type:m,status:f}=r,{data:g,status:S,message:F}=await Z.getAppointmentList(l,o,D,m,f);if(S===0){g=g.map(i=>(i.finished=!!(i.canceled||i.med_hist_id&&i.ps_id),i)),q.value=g,P.value=g.length,T();return}N.error(F)}catch(l){console.error(l),N.error(l)}},G=l=>{k.value=l,T()},J=async l=>{V.value=l,T()},T=async()=>{$.value=q.value.filter((l,o)=>o<V.value*k.value&&o>=k.value*(V.value-1))};return B(r,async()=>{await _()}),(l,o)=>{const D=p("el-input"),m=p("el-form-item"),f=p("el-option"),g=p("el-select"),S=p("el-button"),F=p("el-form"),i=p("el-table-column"),c=p("el-tag"),K=p("el-table"),Q=p("el-pagination"),u=p("el-descriptions-item"),W=p("el-descriptions"),X=p("el-dialog");return y(),oe(se,null,[M("div",{class:z(l.$style.content)},[e(F,{inline:!0,model:r,class:z(l.$style.query)},{default:t(()=>[e(m,null,{default:t(()=>[e(D,{modelValue:r.doc_name,"onUpdate:modelValue":o[0]||(o[0]=n=>r.doc_name=n),modelModifiers:{trim:!0,number:!0},placeholder:"doctor name",onBlur:_},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(D,{modelValue:r.patient_name,"onUpdate:modelValue":o[1]||(o[1]=n=>r.patient_name=n),modelModifiers:{trim:!0},placeholder:"patient name",onBlur:_},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(D,{modelValue:r.dept_name,"onUpdate:modelValue":o[2]||(o[2]=n=>r.dept_name=n),modelModifiers:{trim:!0},placeholder:"Department",onBlur:_},null,8,["modelValue"])]),_:1}),e(m,{label:"Status"},{default:t(()=>[e(g,{modelValue:r.status,"onUpdate:modelValue":o[3]||(o[3]=n=>r.status=n),placeholder:"Status",onChange:_},{default:t(()=>[e(f,{label:"Finished",value:"Finished"}),e(f,{label:"Awaiting Consultation",value:"Awaiting Consultation"}),e(f,{label:"Awaiting medical records",value:"Awaiting medical records"}),e(f,{label:"Awaiting Prescription",value:"Awaiting Prescription"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Consultation Type"},{default:t(()=>[e(g,{modelValue:r.consult_type,"onUpdate:modelValue":o[4]||(o[4]=n=>r.consult_type=n),placeholder:"Consultation Type",onChange:_},{default:t(()=>[e(f,{label:"Chat Consultation",value:0}),e(f,{label:"Video Consultation",value:1})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(S,{type:"primary",onClick:Y},{default:t(()=>[s("Reset")]),_:1})]),_:1})]),_:1},8,["model","class"]),M("div",{class:z(l.$style.tableCard)},[e(K,{data:$.value,size:"small"},{default:t(()=>[e(i,{align:"center",prop:"appt_id",label:"id",width:"50"}),e(i,{align:"center",prop:"doc_name",label:"Doctor name",width:"100"}),e(i,{align:"center",prop:"title_name",label:"Doctor Title"}),e(i,{align:"center",prop:"patient_name",label:"Patient name",width:"100"}),e(i,{align:"center",prop:"dept_name",label:"Department",width:"100"}),e(i,{align:"center",prop:"time",width:"170",label:"Creation time"}),e(i,{align:"center",prop:"fee",label:"Appointment Fee",width:"80"}),e(i,{align:"center",prop:"desc",width:"140",label:"Description of illness","show-overflow-tooltip":""}),e(i,{align:"center",prop:"canceled",label:"Canceled"},{default:t(n=>[e(c,{size:"small",effect:"dark",type:n.row.canceled===0?"success":"danger"},{default:t(()=>[s(d(n.row.canceled===0?"N":"Y"),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",prop:"finished",label:"Status"},{default:t(n=>[e(c,{size:"small",type:n.row.finished||n.row.status==="Finished"?"info":"success"},{default:t(()=>[s(d(n.row.finished?"Finished":n.row.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",prop:"consult_type",label:"Consultation Type"},{default:t(n=>[M("div",{class:z(l.$style.typeTag),style:ie({background:`${n.row.consult_type===0?"#951db9":"#1dbcb6"}`})},d(n.row.consult_type===0?"Chat":"Video"),7)]),_:1}),h.value===1||h.value===2?(y(),C(i,{key:0,align:"center"},{header:t(()=>[s(" View ")]),default:t(n=>[e(S,{size:"small",type:"primary",plain:"",onClick:ge=>L(n.$index,n.row)},{default:t(()=>[s("Details")]),_:2},1032,["onClick"])]),_:1})):v("",!0)]),_:1},8,["data"]),e(Q,{currentPage:V.value,"onUpdate:currentPage":o[5]||(o[5]=n=>V.value=n),"page-size":k.value,"onUpdate:pageSize":o[6]||(o[6]=n=>k.value=n),"page-sizes":[10,20,50,100],background:"",class:z(l.$style.pagination),layout:"sizes, prev, pager, next",total:P.value,onSizeChange:G,onCurrentChange:J},null,8,["currentPage","page-size","class","total"])],2)],2),e(X,{modelValue:A.value,"onUpdate:modelValue":o[7]||(o[7]=n=>A.value=n),title:"Consultation information",width:"50%","align-center":""},{default:t(()=>[e(W,{column:2,style:{margin:"10px 50px"}},{default:t(()=>[e(u,{label:"Appoinement id",width:"300"},{default:t(()=>[s(d(a.appt_id),1)]),_:1}),e(u,{label:"Appointment Time",width:"300"},{default:t(()=>[s(d(a.time),1)]),_:1}),e(u,{label:"doctor name"},{default:t(()=>[s(d(a.doc_name),1)]),_:1}),e(u,{label:"doctor id"},{default:t(()=>[s(d(a.doc_id),1)]),_:1}),e(u,{label:"patient name"},{default:t(()=>[s(d(a.patient_name),1)]),_:1}),e(u,{label:"patient id"},{default:t(()=>[s(d(a.patient_id),1)]),_:1}),e(u,{label:"Doctor Title"},{default:t(()=>[s(d(a.title_name),1)]),_:1}),e(u,{label:"Department"},{default:t(()=>[s(d(a.dept_name),1)]),_:1}),e(u,{label:"Appointment Fee"},{default:t(()=>[s(d(a.fee)+"$ ",1)]),_:1}),e(u,{label:"Status"},{default:t(()=>[e(c,{type:a.status==="Finished"?"info":""},{default:t(()=>[s(d(a.status),1)]),_:1},8,["type"])]),_:1}),e(u,{label:"Consultation Type"},{default:t(()=>[e(c,{color:a.consult_type===0?"#951db9":"#1dbcb6",effect:"dark"},{default:t(()=>[s(d(a.consult_type===0?"Chat Consultation":"Video Consultation"),1)]),_:1},8,["color"])]),_:1}),e(u,{label:"Canceled"},{default:t(()=>[e(c,{type:a.canceled?"info":"success",effect:"dark"},{default:t(()=>[s(d(a.canceled===1?"Y":"N"),1)]),_:1},8,["type"])]),_:1}),e(u,{label:"Medical History"},{default:t(()=>[!a.med_hist_id&&h.value===1?(y(),C(c,{key:0,type:"info"},{default:t(()=>[s(" not available ")]),_:1})):v("",!0),!a.med_hist_id&&h.value===2?(y(),C(c,{key:1,type:"warning",style:{cursor:"pointer"},onClick:H},{default:t(()=>[s(" Fill ")]),_:1})):v("",!0),a.med_hist_id?(y(),C(c,{key:2,type:"success",style:{cursor:"pointer"},onClick:I},{default:t(()=>[s(" Details ")]),_:1})):v("",!0)]),_:1}),e(u,{label:"Prescription"},{default:t(()=>[!a.ps_id&&h.value===1?(y(),C(c,{key:0,type:"info"},{default:t(()=>[s(" not available ")]),_:1})):v("",!0),!a.ps_id&&h.value===2?(y(),C(c,{key:1,type:"warning",style:{cursor:"pointer"},onClick:O},{default:t(()=>[s(" Fill ")]),_:1})):v("",!0),a.ps_id?(y(),C(c,{key:2,type:"success",onClick:R,style:{cursor:"pointer"}},{default:t(()=>[s(" Details ")]),_:1})):v("",!0)]),_:1}),e(u,{label:"Consultation"},{default:t(()=>[e(c,{type:"success",style:{cursor:"pointer"},onClick:E},{default:t(()=>[s(" Details ")]),_:1})]),_:1}),e(u,{label:"Description of illness"},{default:t(()=>[s(d(a.desc),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},fe={$style:_e},ve=ee(me,[["__cssModules",fe]]);export{ve as default};
